<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FacadeReconstruction: FacadeReconstruction</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FacadeReconstruction
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">FacadeReconstruction </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Overview</h2>
<p>The code provided in this repository was created for the 'Urban Assets' work package of the 'Outdoor Asset Capture' project at the University of Bath. The project was set up to acquire models of objects in the environment for use in computer graphics.</p>
<p>The software is designed to take a collection of calibrated images and a point cloud, and produce piecewise primitive surfaces from user annotations. The use can either specify a region of points on a quadric surface, or compose a surface from a pair of splines which are fitted to edge points.</p>
<h3>An example of the software with user interactions</h3>
<div class="image">
<img src="doc/SoftwareExample.png" alt="Image of the interface" width="600px"/>
</div>
<p>An example of the interface is shown in the image above. The user can either choose to fit a simple quadric surface, such as a cylinder in the top row, or a pair of splines in the bottom row. A collection of annotations are made to identify which points in the point cloud belong to the surface. Finally, the primitive surfaces are produced as shown on the right hand side.</p>
<p>The documentation for the library can be found at <a href="http://dabeale.github.io/FacadeReconstruction">dabeale.github.io/FacadeReconstruction</a>.</p>
<h3>Final Results</h3>
<div class="image">
<img src="doc/FinalResults.png" alt="Final Results" width="600px"/>
</div>
<p>A selection of completed surfaces are shown in the image above, after a full set of annotations and surface closure.</p>
<h2>Pre-requisites</h2>
<p>The software requires the following in order to compile,</p>
<ul>
<li>Mac OSX with Qt5.</li>
<li>OpenCV installed in /usr/local. The homebrew version has been tested and works.</li>
</ul>
<p>The following libraries are either included with this software, or a submodule. Be sure to take note of their relevant licenses,</p>
<ul>
<li><a href="http://eigen.tuxfamily.org">Eigen</a>. Located in libs/Eigen.</li>
<li><a href="http://vcg.isti.cnr.it/vcglib/">VCGlib</a>. Located in libs/vcglib.</li>
<li><a href="https://github.com/dept2/CuteLogger">CuteLogger</a>. Located in libs/cutelogger.</li>
<li><a href="http://glew.sourceforge.net/">GLEW</a>. Located in libs/glew.</li>
</ul>
<p>In order to install the post-processing scripts <a href="https://www.gnu.org/software/octave/">GNU Octave</a> is required. This can either be installed from the website, or using package manager such as <a href="http://brew.sh/">Homebrew</a>. Note that the executable mkoctfile must be on the system path.</p>
<h2>Installation</h2>
<p>First clone the git repository using the command, </p><blockquote class="doxtable">
<p>git clone &ndash;recursive <a href="https://github.com/dabeale/FacadeReconstruction">https://github.com/dabeale/FacadeReconstruction</a> </p>
</blockquote>
<p>Note that the '&ndash;recursive' option is required since the repository contains submodules, such as Eigen, VCGlib, and CuteLogger.</p>
<p>To compile the software either open the project file in the source directory, and compile from Qt Creator, or run, </p><blockquote class="doxtable">
<p>./Build.sh </p>
</blockquote>
<p>from the base directory. This script will check for the required pre-requisites before buiding. If the build fails please email me at <a href="#" onclick="location.href='mai'+'lto:'+'dab'+'ea'+'le@'+'gm'+'ail'+'.c'+'om'; return false;">dabea<span style="display: none;">.nosp@m.</span>le@g<span style="display: none;">.nosp@m.</span>mail.<span style="display: none;">.nosp@m.</span>com</a> and I will try to fix it.</p>
<h2>Example usage</h2>
<p>The software requires a point cloud and calibrated set of images in order to run. It will load a file in the Meshlab Project (.mlp) format, which provides the locations of the necessary files and also details the camera matrices. <a href="http://www.meshlab.net/">MeshLab</a> can be used to create and manipulate these files. In order to provide a usage demonstration an example mlp file and data can be found in the 'data' subdirectory.</p>
<p>Once the code has compiled, open the executable from the 'bin' directory as follows, </p><blockquote class="doxtable">
<p>./GUI </p>
</blockquote>
<p>A file input dialogue will appear from which the .mlp file must be chosen. For the purposes of demonstration, open the 'post_office_set_2.mlp' file in the 'data' subdirectory. Once the file has loaded the software will display an interface, as shown below,</p>
<div class="image">
<img src="doc/OpeningScreen.png" alt="LoadedInterface" width="600px"/>
</div>
<p>Click on the button labelled 'MAKE CYLINDER'. Move the slider above the image to just over half way, and paint over one of the pillars on the entrance of the building. Once this is done, click on the right pointing green arrow once, to select a new view. Paint over the same pillar again. The view should be similar to the one shown below,</p>
<div class="image">
<img src="doc/PaintedPillar.png" alt="CylinderFitting" width="600px"/>
</div>
<p>Click on the button labelled 'NEXT' in the top left hand corner to return to the main screen. If there are too few views selected, or not enough annotation, the interface will display an error message. The main interface should look like the one below, displaying the point cloud and the surface on at trackball.</p>
<div class="image">
<img src="doc/CylinderFitted.png" alt="CylinderFitting" width="600px"/>
</div>
<p>The same process is used for fitting an Ellipsoid, or a pair of GTM splines arranged orthogonally or in parallel.</p>
<h1>Results</h1>
<p>The results of extracting the primitive surfaces and final closure of the surfaces can be seen in the image below, compared to a Poisson reconstruction on the point cloud. The images were taken from a collection of locations around Bath and Rome.</p>
<h3>Method comparison</h3>
<div class="image">
<img src="doc/MethodComparison.png" alt="MethodComparison" width="600px"/>
</div>
 </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
